<!DOCTYPE html>

<html lang="pt-BR">
<head>
	 <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

	<title>WS Categorias</title>
</head>

<body>


 <h1>WS Categorias Registro</h1>
 

	<form action="" id="formCadastroCategorias">
	
	<div class="mb-3">
		<label for="codigo" class="form-label">Cód.</label>
		<input type="text" class="form-control" id="codigo" readonly>
	</div>
	
	<div class="mb-3">
		<label for="nome" class="form-label">Nome</label>
		<input type="text" class="form-control" id="nome" placeholder="nome" required>
	</div>
	
	<div class="mb-3">
		<label for="descricao" class="form-label">Descrição</label>
		<input type="text" class="form-control" id="descricao" placeholder="descrição" required>
	</div>
	
	
	</form>

	<button type="button" class="btn btn-primary" onclick="criarCategorias()">Salvar</button>

 <!-- Option 1: Bootstrap Bundle with Popper -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
 <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
 

 
 <script type="text/javascript">

	function criarCategorias(){
		
		var id = $("#codigo").val();
		var nome = $("#nome").val();
		var descricao = $("#descricao").val();
		
		// fazer a requisição
		$.ajax({
			method: "POST",
			url: "/api/v1/categorias",
			data: JSON.stringify({id: codigo, nome: nome, descricao: descricao}),
			contentType: "application/json; charset=utf-8",
			success: function (resp) {
				
				// JSON.parse(data.nome);
				$("#codigo").val(resp.codigo);
				
				alert("Categoria '" + resp.nome + "' criada com sucesso!\n" + resp);
			}
		}).fail(function (xhr, status, errorThrown) {
      		 var json = JSON.parse(xhr.responseText);
	         var msg = "Falha ao criar categoria!\n" + "Status: " + json.status + "\nMensagem: " + json.message + "\nPath: " + json.path;
	         alert(msg);
		});
		
	}

	
</script>
 
 
</body>
</html>